docker-puppet
=============

A wondrous base image for Puppet-automated Docker instances.

Rather than write 10<sup>n</sup> disparate `Dockerfile`s which are tedious to maintain, difficult to test,
and prone to errors, why not just [automate all the things](http://i.imgur.com/IK8imUY.jpg) with Puppet? 
This Docker container makes it trivial to setup Puppet-enabled Docker images in no time, flat.

## Built on Phusion's Excellent Docker baseimage

Most Docker base images don't include a proper init system, system logging, or simple facilities like SSH.
[Phusion](https://phusion.nl) provides an excellent Docker [baseimage](https://github.com/phusion/baseimage-docker) 
container based on Ubuntu 14.04 LTS which fixes all of these problems. This means that `syslog` works as
planned, `cron` jobs actually run, and you can `ssh` into the machine with a only a dash of extra
[configuration](https://github.com/phusion/baseimage-docker#login-to-the-container-via-ssh).

## Get Started, Right Now

## Advanced Configuration

### Building from Source

### Environment Variables

We currently support the following environment variables:

| Variable Name         | Required  | Description                                                 |
|-----------------------|-----------|-------------------------------------------------------------|
|`PUPPETMASTER_TCP_HOST`| _kind of_ | The TCP host of the Puppet Master. (DNS name or IP address) |
|`PUPPETMASTER_TCP_PORT`| nope      | The TCP port number of the Puppet Master. Defaults to 8140. |

Though `PUPPETMASTER_TCP_HOST` isn't _exactly_ required, it's a pretty good idea to set this to your
Puppet Master's host address. If you don't, the Puppet client won't really do anything for now. We
have plans to add some manual `puppet apply` `cron` job for masterless configurations, but be patient
or submit it in a pull-request.

### Volume Mount Points

We haven't done too much in the area of highly-customized Docker volume locations, but there are a few
interesting locations which you'll probably want to mount outside of your container to be able to 
automate moar things.

| Internal Location     | Description                                                                                  |
|-----------------------|----------------------------------------------------------------------------------------------|
| `/var/log/puppet`     | You know, where the logs are kept and stuff. Also see syslog.                                |
| `/var/lib/puppet/ssl` | This is where all SSL certificates will be stored as they are generated by the Puppet Agent. |

You'll probably be most interested in `/var/lib/puppet/ssl`, as you can thus even keep your Docker Puppet
containers' private keys in your Puppet configuration and deploy them, speeding up deployment by not requiring
you to manually sign all of your Docker Puppet containers' keys. Again, [automate all the things](http://i.imgur.com/IK8imUY.jpg).
